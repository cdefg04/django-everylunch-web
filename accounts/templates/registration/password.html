{% extends 'home.html' %}
{% load static %}

{% block content %}
{#    <div style="display: block; width: 50%; height: 100%; margin: 0 auto; padding-top: 100px;">#}
{#        <form method="POST">#}
{#            {% csrf_token %}#}
{#            {{ password_change_form }}#}
{#            <input type="submit" class="btn btn-primary" value="변경하기"/>#}
{#        </form>#}
{#    </div>#}
    <h2 style="margin-bottom: 1.5rem!important; vertical-align: middle; text-align: center; padding-top: 150px;
                border-style: none; font-weight: bold; color: #2545fe">비밀번호 변경</h2>

    <div style="width: 30%; height: 100%; padding-top: 30px; margin: 0 auto">
    <form method="POST" novalidate>
    {% csrf_token %}
        <div>
            <label name="label_old_password" for="{{ password_change_form.old_password.id_for_label }}">{{ password_change_form.old_password.label }}</label>
            {{ password_change_form.old_password }}
            <script type="text/javascript">
                if (document.getElementsByName('old_password')[0].value != '') {
                    document.getElementsByName('label_old_password')[0].setAttribute('class', 'active');
                }
            </script>
            {% if password_change_form.old_password.errors %}
            <script type="text/javascript">
                document.getElementsByName('old_password')[0].setAttribute('class', 'form-control is-invalid')
            </script>
            {% for error in password_change_form.old_password.errors %}
            <div class="invalid-feedback">
                {{ error }}
            </div>
            {% endfor %}
            {% endif %}
        </div>
        <div style="padding-top: 10px;">
            <label name="label_new_password1" for="{{ password_change_form.new_password1.id_for_label }}">{{ password_change_form.new_password1.label }}</label>
            {{ password_change_form.new_password1 }}
            <script type="text/javascript">
                if (document.getElementsByName('new_password1')[0].value != '') {
                    document.getElementsByName('label_new_password1')[0].setAttribute('class', 'active');
                }
            </script>
            {% if password_change_form.new_password1.errors %}
            <script type="text/javascript">
                document.getElementsByName('new_password1')[0].setAttribute('class', 'form-control is-invalid')
            </script>
            {% for error in password_change_form.new_password1.errors %}
            <div class="invalid-feedback">
                {{ error }}
            </div>
            {% endfor %}
            {% endif %}
        </div>
        <div style="padding-top: 10px;">
            <label name="label_new_password2" for="{{ password_change_form.new_password2.id_for_label }}">{{ password_change_form.new_password2.label }}</label>
            {{ password_change_form.new_password2 }}
            <script type="text/javascript">
                if (document.getElementsByName('new_password2')[0].value != '') {
                    document.getElementsByName('label_new_password2')[0].setAttribute('class', 'active');
                }
            </script>
            {% if password_change_form.new_password2.errors %}
            <script type="text/javascript">
                document.getElementsByName('new_password2')[0].setAttribute('class', 'form-control is-invalid')
            </script>
            {% for error in password_change_form.new_password2.errors %}
            <div style="white-space: nowrap;" class="invalid-feedback">
                {{ error }}
            </div>
            {% endfor %}
            {% endif %}
            <small>
                최소 8개의 숫자와 문자 또는 특수기호를 입력해주세요.
            </small>
            <div style="text-align: center; margin-bottom:-25px; padding-top: 20px;">
                <p style="color:gray; margin-bottom: 4px;">
                    <i class="fas fa-exclamation-triangle"></i>&nbsp;{{ user.get_username }} 계정의 비밀번호를 변경합니다.
                </p>
                <a onclick="location.href='/accounts/update'" class="btn btn-light">
                    <i class="fa fa-reply"></i>&nbsp;돌아가기</a>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-check"></i>&nbsp;변경하기
                </button>
            </div>
        </div>
    </form>
    </div>

{% endblock %}